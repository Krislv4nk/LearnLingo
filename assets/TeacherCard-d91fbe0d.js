import{g as w,h as u,i as x,m as j,n as R,j as e,s as v,o as z,q as g,F as G,t as J,u as h,r as _,v as K,w as Q,S as F,D as P}from"./index-c8d0e905.js";const X=async()=>{try{const n=u(x,"/teachers"),r=await j(n);if(r.exists()){const t=r.val();return Object.keys(t).map(i=>({id:i,...t[i]}))}return[]}catch(n){return console.error("Error during fetching:",n),[]}},Z=async n=>{try{const r=u(x,"/teachers"),t=await j(r);if(t.exists()){const i=t.val();return Object.keys(i).map(s=>({id:s,...i[s]})).filter(s=>Array.isArray(s.languages)?s.languages.includes(n):s.languages===n)}return[]}catch(r){return console.error("Error during fetching:",r),[]}},ee=async n=>{try{const r=u(x,"/teachers"),t=await j(r);if(t.exists()){const i=t.val();return Object.keys(i).map(s=>({id:s,...i[s]})).filter(s=>Array.isArray(s.levels)?s.levels.includes(n):s.levels===n)}return[]}catch(r){return console.error("Error during fetching:",r),[]}},se=async n=>{try{const r=u(x,"/teachers"),t=await j(r);if(t.exists()){const i=t.val();return Object.keys(i).map(s=>({id:s,...i[s]})).filter(s=>s.price_per_hour===+n)}return[]}catch{return[]}},ls=async(n,r,t)=>{if(!n&&!r&&!t)return await X();try{let i,l,s;if(n&&(i=await Z(n)),r&&(l=await ee(r)),t&&(s=await se(t)),n&&!r&&!t)return i;if(!n&&r&&!t)return l;if(!n&&!r&&t)return s;{let c=[];return n&&r&&!t?c=i.filter(m=>l.some(p=>m.id===p.id)):!n&&r&&t?c=l.filter(m=>s.some(p=>m.id===p.id)):n&&!r&&t?c=i.filter(m=>s.some(p=>m.id===p.id)):n&&r&&t&&(c=i.filter(m=>l.some(p=>s.some(y=>m.id===p.id&&p.id===y.id)))),c}}catch(i){console.error(i)}},ae=async n=>{try{const r=w();if(!r)throw new Error("User is not authenticated");const t=r.uid,i=u(x,`users/${t}/favorites`);let s=(await j(i)).val()||[];return s.some(c=>c.id===n.id)||(s.push(n),await R(i,s)),s}catch(r){return console.error("Error adding to favorites:",r),[]}},re=async n=>{try{const r=w();if(!r)throw new Error("User is not authenticated");const t=r.uid,i=u(x,`users/${t}/favorites`);let s=(await j(i)).val()||[];return s=s.filter(c=>c.id!==n),await R(i,s),s}catch(r){return console.error("Error removing from favorites:",r),[]}},ds=async()=>{try{const n=w();if(!n)throw new Error("User is not authenticated");const r=n.uid,t=u(x,`users/${r}/favorites`);return(await j(t)).val()||[]}catch(n){return console.error("Error getting favorite teachers:",n),[]}},ne="_itemCard_fp21p_4",oe="_avatarBorder_fp21p_17",te="_avatar_fp21p_17",ie="_infoWrapper_fp21p_45",ce="_infoDetails_fp21p_51",le="_lang_fp21p_56",de="_lessonInfo_fp21p_60",pe="_bookIcon_fp21p_65",me="_lessonItem_fp21p_69",he="_spanPrice_fp21p_73",fe="_spanDeco_fp21p_78",_e="_likeButton_fp21p_85",ue="_regular_fp21p_92",xe="_favorite_fp21p_97",je="_name_fp21p_101",ve="_basicInfo_fp21p_108",be="_basicInfoItem_fp21p_114",Ne="_langList_fp21p_119",ge="_basicInfoPh_fp21p_124",Ie="_langItem_fp21p_131",ye="_spanBasicInfo_fp21p_144",Be="_toggleExpand_fp21p_151",we="_levelsList_fp21p_165",ke="_levelsItem_fp21p_170",Le="_expanded_fp21p_177",Ee="_experience_fp21p_181",Te="_reviewers_fp21p_185",$e="_reviewerBox_fp21p_192",Ce="_reviewName_fp21p_198",Fe="_rate_fp21p_201",Pe="_avatarReviewer_fp21p_209",Re="_bookTrialBtn_fp21p_221",Se="_backdrop_fp21p_244",a={itemCard:ne,avatarBorder:oe,avatar:te,infoWrapper:ie,infoDetails:ce,lang:le,lessonInfo:de,bookIcon:pe,lessonItem:me,spanPrice:he,spanDeco:fe,likeButton:_e,regular:ue,favorite:xe,name:je,basicInfo:ve,basicInfoItem:be,langList:Ne,basicInfoPh:ge,langItem:Ie,spanBasicInfo:ye,toggleExpand:Be,levelsList:we,levelsItem:ke,expanded:Le,experience:Ee,reviewers:Te,reviewerBox:$e,reviewName:Ce,rate:Fe,avatarReviewer:Pe,bookTrialBtn:Re,backdrop:Se},De="_wrapper_15ce8_5",Ae="_closeBtn_15ce8_20",Oe="_cross_15ce8_34",We="_formInfo_15ce8_40",qe="_title_15ce8_55",I={wrapper:De,closeBtn:Ae,cross:Oe,formInfo:We,title:qe},He=({onClose:n})=>e.jsxs("div",{className:I.wrapper,children:[e.jsx("button",{type:"button",onClick:n,className:I.closeBtn,children:e.jsx("svg",{className:I.cross,children:e.jsx("use",{href:`${v}#icon-cross`})})}),e.jsx("p",{className:I.formInfo,children:"This feature is available for authenticated users only. Please log in to continue."})]}),Ue="_wrapper_9bfe4_3",Me="_closeBtn_9bfe4_12",Ve="_cross_9bfe4_26",Ye="_title_9bfe4_31",ze="_info_9bfe4_38",Ge="_container_9bfe4_45",Je="_avatar_9bfe4_51",Ke="_nameBox_9bfe4_56",Qe="_name_9bfe4_56",Xe="_teacher_9bfe4_66",Ze="_radioWrapper_9bfe4_74",es="_radioLabel_9bfe4_80",ss="_goals_9bfe4_88",as="_radio_9bfe4_74",rs="_customRadio_9bfe4_97",ns="_error_9bfe4_123",os="_input_9bfe4_130",ts="_bookBtn_9bfe4_143",o={wrapper:Ue,closeBtn:Me,cross:Ve,title:Ye,info:ze,container:Ge,avatar:Je,nameBox:Ke,name:Qe,teacher:Xe,radioWrapper:Ze,radioLabel:es,goals:ss,radio:as,customRadio:rs,error:ns,input:os,bookBtn:ts},is=({onClose:n,teacher:r})=>{const t=z().shape({reason:g().required("Please select your reason for learning English"),name:g().required("Name is required"),email:g().email("Invalid email").required("Email is required"),phone:g().required("Phone number is required").matches(/^[0-9]{10}$/,"Invalid phone number")}),i=(l,{setSubmitting:s})=>{s(!1)};return e.jsxs("div",{className:o.wrapper,children:[e.jsx("h3",{className:o.title,children:"Book trial lesson"}),e.jsx("p",{className:o.info,children:"Our experienced tutor will assess your current language level, discuss your learning goals, and tailor the lesson to your specific needs."}),e.jsx("button",{type:"button",onClick:n,className:o.closeBtn,children:e.jsx("svg",{className:o.cross,children:e.jsx("use",{href:`${v}#icon-cross`})})}),e.jsxs("div",{className:o.container,children:[e.jsx("img",{className:o.avatar,src:r.avatar_url,alt:"avatar"}),e.jsxs("div",{className:o.nameBox,children:[e.jsx("p",{className:o.teacher,children:"Your teacher"}),e.jsxs("h5",{className:o.name,children:[r.name," ",r.surname]})]})]}),e.jsx("h4",{className:o.goals,children:"What is your main reason for learning English?"}),e.jsx(G,{initialValues:{reason:"",name:"",email:"",phone:""},validationSchema:t,onSubmit:i,children:({isSubmitting:l,errors:s,touched:c})=>e.jsxs(J,{children:[e.jsxs("div",{className:o.radioWrapper,role:"group","aria-labelledby":"reason-label",children:[e.jsxs("label",{htmlFor:"reason1",className:o.radioLabel,children:[e.jsx(h,{type:"radio",name:"reason",id:"reason1",value:"reason1",className:o.radio}),e.jsx("span",{className:o.customRadio}),"Career and business"]}),e.jsxs("label",{htmlFor:"reason2",className:o.radioLabel,children:[e.jsx(h,{type:"radio",name:"reason",id:"reason2",value:"reason2",className:o.radio}),e.jsx("span",{className:o.customRadio}),"Lesson for kids"]}),e.jsxs("label",{htmlFor:"reason3",className:o.radioLabel,children:[e.jsx(h,{type:"radio",name:"reason",id:"reason3",value:"reason3",className:o.radio}),e.jsx("span",{className:o.customRadio}),"Living abroad"]}),e.jsxs("label",{htmlFor:"reason4",className:o.radioLabel,children:[e.jsx(h,{type:"radio",name:"reason",id:"reason4",value:"reason4",className:o.radio}),e.jsx("span",{className:o.customRadio}),"Exams and coursework"]}),e.jsxs("label",{htmlFor:"reason5",className:o.radioLabel,children:[e.jsx(h,{type:"radio",name:"reason",id:"reason5",value:"reason5",className:o.radio}),e.jsx("span",{className:o.customRadio}),"Culture, travel or hobby"]})]}),s.reason&&c.reason?e.jsx("div",{className:o.error,children:s.reason}):null,e.jsx(h,{type:"text",name:"name",placeholder:"Full Name",className:o.input}),s.name&&c.name?e.jsx("div",{className:o.error,children:s.name}):null,e.jsx(h,{type:"email",name:"email",placeholder:" Email",className:o.input}),s.email&&c.email?e.jsx("div",{className:o.error,children:s.email}):null,e.jsx(h,{type:"tel",name:"phone",placeholder:"Phone number",className:o.input}),s.phone&&c.phone?e.jsx("div",{className:o.error,children:s.phone}):null,e.jsx("button",{className:o.bookBtn,type:"submit",disabled:l,children:"Book"})]})})]})},ps=({teacher:n})=>{const{name:r,surname:t,languages:i,levels:l,rating:s,reviews:c,price_per_hour:m,lessons_done:p,avatar_url:y,lesson_info:S,conditions:D,experience:A,id:b}=n,[N,O]=_.useState(!1),[k,B]=_.useState(!1),[W,q]=_.useState(!1),[L,E]=_.useState(!1),[H,T]=_.useState(!1);_.useEffect(()=>{const d=K(),f=Q(d,Y=>{q(!!Y)});return()=>f()},[]),_.useEffect(()=>{const d=localStorage.getItem(`favorite_${b}`);B(d==="true")},[b]);const U=async()=>{if(!W){E(!0);return}try{k?(await re(b),localStorage.setItem(`favorite_${b}`,"false"),B(!1)):(await ae(n),localStorage.setItem(`favorite_${b}`,"true"),B(!0))}catch(d){console.error("Error handling favorite click:",d)}},$=()=>{E(!1)},M=()=>{T(!0)},C=()=>{T(!1)},V=()=>{O(!N)};return e.jsxs("li",{className:`${a.itemCard} ${N?a.expanded:""}`,children:[e.jsx("div",{className:a.avatarBorder,children:e.jsx("img",{className:a.avatar,src:y,alt:"avatar"})}),e.jsxs("div",{className:a.infoWrapper,children:[e.jsxs("div",{className:a.infoDetails,children:[e.jsx("p",{className:a.lang,children:"Languages"}),e.jsxs("ul",{className:a.lessonInfo,children:[e.jsxs("li",{className:a.lessonItem,children:[e.jsx("svg",{className:a.bookIcon,width:20,height:20,children:e.jsx("use",{xlinkHref:`${v}#icon-book`})}),"Lessons online"]}),e.jsx("span",{className:a.spanDeco}),e.jsxs("li",{className:a.lessonItem,children:[e.jsx("p",{children:"Lessons done:"}),p]}),e.jsx("span",{className:a.spanDeco}),e.jsxs("li",{className:a.lessonItem,children:[e.jsx("svg",{width:20,height:20,children:e.jsx("use",{xlinkHref:`${v}#icon-star`})}),e.jsx("p",{children:"Rating"}),s]}),e.jsx("span",{className:a.spanDeco}),e.jsxs("li",{className:a.lessonItem,children:[e.jsx("p",{children:"Price / 1 hour"})," ",e.jsxs("span",{className:a.spanPrice,children:[m," $"]})]})]}),e.jsx("button",{type:"button",className:a.likeButton,onClick:U,children:e.jsx("svg",{width:20,height:20,className:k?a.favorite:a.regular,children:e.jsx("use",{xlinkHref:`${v}#icon-like`})})}),L&&e.jsx(F,{injectFirst:!0,children:e.jsx(P,{open:L,onClose:$,className:a.backdrop,PaperComponent:()=>e.jsx(He,{onClose:$})})})]}),e.jsxs("h2",{className:a.name,children:[r," ",t]}),e.jsxs("ul",{className:a.basicInfo,children:[e.jsx("li",{className:a.basicInfoItem,children:e.jsxs("div",{className:a.basicInfoPh,children:[e.jsx("span",{className:a.spanBasicInfo,children:"Speaks: "}),e.jsx("ul",{className:a.langList,children:i.map((d,f)=>e.jsx("li",{className:a.langItem,children:d},f))})]})}),e.jsx("li",{className:a.basicInfoItem,children:e.jsxs("p",{className:a.basicInfoPh,children:[e.jsx("span",{className:a.spanBasicInfo,children:"Lesson Info:"})," ",S]})}),e.jsx("li",{className:a.basicInfoItem,children:e.jsxs("p",{className:a.basicInfoPh,children:[e.jsx("span",{className:a.spanBasicInfo,children:"Conditions:"})," ",D]})})]}),N&&e.jsxs("div",{children:[e.jsx("p",{className:a.experience,children:A}),e.jsx("ul",{className:a.reviewers,children:c.map((d,f)=>e.jsxs("li",{children:[e.jsxs("div",{className:a.reviewerBox,children:[e.jsx("span",{className:a.avatarReviewer,children:d.reviewer_name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:a.reviewName,children:d.reviewer_name}),e.jsxs("p",{className:a.rate,children:[e.jsx("svg",{width:20,height:20,children:e.jsx("use",{xlinkHref:`${v}#icon-star`})}),d.reviewer_rating.toFixed(2)]})]})]}),e.jsx("p",{children:d.comment})]},f))})]}),e.jsx("button",{className:a.toggleExpand,onClick:V,type:"button",children:N?"Show less":"Read more"}),e.jsx("ul",{className:a.levelsList,children:l.map((d,f)=>e.jsx("li",{className:a.levelsItem,children:d},f))}),N&&e.jsxs(e.Fragment,{children:[e.jsx("button",{type:"button",className:a.bookTrialBtn,onClick:M,children:"Book trial lesson"}),e.jsx(F,{injectFirst:!0,children:e.jsx(P,{open:H,onClose:C,className:a.backdrop,PaperComponent:()=>e.jsx(is,{onClose:C,teacher:n})})})]})]})]},n.id)};export{ps as T,X as a,ds as b,ls as g};
